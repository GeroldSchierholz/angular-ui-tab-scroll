/*
 * angular-ui-tab-scroll
 * https://github.com/VersifitTechnologies/angular-ui-tab-scroll
 *
 * Version: 2.2.3
 * License: MIT
 */
angular.module("ui.tab.scroll",[]).provider("scrollableTabsetConfig",function(){var t={showDropDown:!0,showTooltips:!0,tooltipLeftPlacement:"right",tooltipRightPlacement:"left",scrollBy:"50",autoRecalculate:!1},o=angular.extend({},t);return{setShowDropDown:function(t){o.showDropDown=1==t},setShowTooltips:function(t){o.showTooltips=1==t},setTooltipLeftPlacement:function(t){o.tooltipLeftPlacement=t},setTooltipRightPlacement:function(t){o.tooltipRightPlacement=t},setScrollBy:function(t){o.scrollBy=t},setAutoRecalculate:function(t){o.autoRecalculate=1==t},$get:function(){return{showDropDown:o.showDropDown,showTooltips:o.showTooltips,tooltipLeftPlacement:o.tooltipLeftPlacement,tooltipRightPlacement:o.tooltipRightPlacement,scrollBy:o.scrollBy,autoRecalculate:o.autoRecalculate}}}}).directive("scrollableTabset",["scrollableTabsetConfig","$window","$interval","$timeout","$sce",function(t,o,e,n,l){return{restrict:"AE",transclude:!0,scope:{showDropDown:"@",showTooltips:"@",tooltipLeftPlacement:"@",tooltipRightPlacement:"@",scrollBy:"@",autoRecalculate:"@",api:"=?"},template:['<div class="ui-tabs-scrollable" ng-class="{\'show-drop-down\': !hideDropDown}">','<button type="button" ng-mousedown="scrollButtonDown(\'left\', $event)" ng-mouseup="scrollButtonUp()" ng-hide="hideButtons" ng-disabled="disableLeft" class="btn nav-button left-nav-button" tooltip-placement="{{tooltipLeftDirection}}" uib-tooltip-html="tooltipLeftHtml"></button>','<div class="spacer" ng-class="{\'hidden-buttons\': hideButtons}" ng-transclude></div>','<button type="button" ng-mousedown="scrollButtonDown(\'right\', $event)" ng-mouseup="scrollButtonUp()" ng-hide="hideButtons" ng-disabled="disableRight" class="btn nav-button right-nav-button" tooltip-placement="{{tooltipRightDirection}}" uib-tooltip-html="tooltipRightHtml"></button>','<div class="btn-group" uib-dropdown dropdown-append-to-body ng-hide="hideDropDown">','<button type="button" class="btn" uib-dropdown-toggle></button>','<ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu role="menu">','<li role="menuitem" ng-repeat="tab in dropdownTabs" ng-class="{\'disabled\': tab.disabled}" ng-click="activateTab(tab)">',"<a href><span class=\"dropDownTabActiveMark\" ng-style=\"{'visibility': tab.active?'visible':'hidden'}\"></span>{{tab.tabScrollTitle}}</a>","</li>","</ul>","</div>","</div>"].join(""),link:function(i,a){i.dropdownTabs=[],i.hideButtons=!0,i.hideDropDown=!0,i.tooltipRightHtml="",i.tooltipLeftHtml="",i.disableLeft=!0,i.disableRight=!0,i.tooltipLeftDirection=i.tooltipLeftPlacement?i.tooltipLeftPlacement:t.tooltipLeftPlacement,i.tooltipRightDirection=i.tooltipRightPlacement?i.tooltipRightPlacement:t.tooltipRightPlacement,i.mouseDownInterval=null,i.isHolding=!1,i.winResizeTimeout,i.userShowDropDown=i.showDropDown?"true"===i.showDropDown:t.showDropDown,i.userShowTooltips=i.showTooltips?"true"===i.showTooltips:1==t.showTooltips,i.scrollByPixels=parseInt(i.scrollBy?i.scrollBy:t.scrollBy),i.api={doRecalculate:function(){n(function(){i.reCalcAll()})},scrollTabIntoView:function(t){n(function(){i.scrollTabIntoView(t)})}},i.scrollTo=function(t,o,e,l){var a=t.scrollLeft,r=20,s=0;!function c(u){u+=r,s=l===!0?i.linearTween(u,a,o,e):i.easeInOutQuad(u,a,o,e),t.scrollLeft=s,e>u?setTimeout(function(){c(u)},r):n(function(){i.reCalcSides()})}(0)},i.linearTween=function(t,o,e,n){return e*t/n+o},i.easeInOutQuad=function(t,o,e,n){return t/=n/2,1>t?e/2*t*t+o:(t--,-e/2*(t*(t-2)-1)+o)},i.onWindowResize=function(){clearTimeout(i.winResizeTimeout),i.winResizeTimeout=setTimeout(function(){i.reCalcAll(),i.$apply()},250)},i.cancelMouseDownInterval=function(){i.isHolding=!1,i.mouseDownInterval&&(e.cancel(i.mouseDownInterval),i.mouseDownInterval=null)},i.scrollButtonDown=function(t,o){o.stopPropagation(),i.isHolding=!0;var n="left"===t?0-i.scrollByPixels:i.scrollByPixels;i.scrollTo(i.tabContainer,n,150,!0),i.mouseDownInterval=e(function(){i.isHolding&&(i.scrollTo(i.tabContainer,n,150,!0),o.target.disabled&&i.cancelMouseDownInterval())},100)},i.scrollButtonUp=function(){i.cancelMouseDownInterval()},i.activateTab=function(t){t.disabled||(t.active=!0,n(function(){i.scrollTabIntoView()}))},i.reCalcSides=function(){i.tabContainer&&!i.hideButtons&&(i.disableRight=i.tabContainer.scrollLeft>=i.tabContainer.scrollWidth-i.tabContainer.offsetWidth,i.disableLeft=i.tabContainer.scrollLeft<=0,i.userShowTooltips&&i.reCalcTooltips())},i.reCalcTooltips=function(){if(i.tabContainer&&!i.hideButtons){var t=[],o=[],e=i.tabContainer.querySelectorAll("li");angular.forEach(e,function(e){var n=parseInt(e.getBoundingClientRect().left+e.getBoundingClientRect().width-i.tabContainer.getBoundingClientRect().left),l=e.getBoundingClientRect().left-i.tabContainer.getBoundingClientRect().left,a=e.getAttribute("data-tabScrollHeading"),r=e.getAttribute("data-tabScrollIgnore");n>i.tabContainer.offsetWidth&&!r&&(a?t.push(a):e.textContent&&t.push(e.textContent)),0>l&&!r&&(a?o.push(a):e.textContent&&o.push(e.textContent))});var n=t.join("<br>");i.tooltipRightHtml=l.trustAsHtml(n);var a=o.join("<br>");i.tooltipLeftHtml=l.trustAsHtml(a)}},i.scrollTabIntoView=function(t){if(i.tabContainer&&!i.hideButtons){var o,e=parseInt(t);if(e){var n=i.tabContainer.querySelectorAll("li");n.length>e&&(o=n[e])}else{var l=i.tabContainer.querySelector("li.active");l&&(o=l)}if(o){var a=parseInt(o.getBoundingClientRect().left+o.getBoundingClientRect().width-i.tabContainer.getBoundingClientRect().left),r=o.getBoundingClientRect().left-i.tabContainer.getBoundingClientRect().left;if(0>r){var s=r-20;i.scrollTo(i.tabContainer,s,700)}else if(a>i.tabContainer.offsetWidth){var s=a-i.tabContainer.offsetWidth+20;i.scrollTo(i.tabContainer,s,700)}}}},i.init=function(){if(i.tabContainer=a[0].querySelector(".spacer ul.nav-tabs"),i.tabContainer){var e=i.autoRecalculate?"true"===i.autoRecalculate:t.autoRecalculate;if(e){var l=angular.element(a[0].querySelector(".spacer div"));i.$watchCollection(function(){return l.isolateScope()?l.isolateScope().tabs:!1},function(){n(function(){i.reCalcAll()})})}i.reCalcAll(),angular.element(o).on("resize",i.onWindowResize)}},i.reCalcAll=function(){if(i.tabContainer&&(i.hideButtons=i.tabContainer.scrollWidth<=i.tabContainer.offsetWidth,i.hideDropDown=i.userShowDropDown?i.hideButtons:!0,!i.hideButtons)){if(!i.hideDropDown){var t=i.tabContainer.querySelectorAll("li");i.dropdownTabs=[],angular.forEach(t,function(t){var o=t.getAttribute("data-tabScrollIgnore");if(!o){var e=t.getAttribute("data-tabScrollHeading"),n=angular.element(t).isolateScope();n.tabScrollTitle=e?e:t.textContent.trim(),i.dropdownTabs.push(n)}})}i.reCalcSides()}},n(function(){i.init()}),i.$on("$destroy",function(){angular.element(o).off("resize",i.onWindowResize)})}}}]);